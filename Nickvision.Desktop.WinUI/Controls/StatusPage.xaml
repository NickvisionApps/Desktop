<?xml version="1.0" encoding="utf-8"?>
<UserControl
    x:Class="Nickvision.Desktop.WinUI.Controls.StatusPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Nickvision.Desktop.WinUI.Controls"
    xmlns:converters="using:Nickvision.Desktop.WinUI.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d" HorizontalAlignment="Center" VerticalAlignment="Center">

    <UserControl.Resources>
        <converters:StringToVisibilityConverter x:Key="StringToVisibilityConverter"/>

        <converters:NullableToVisibilityConverter x:Key="NullableToVisibilityConverter"/>

        <converters:BoolToDoubleConverter x:Key="CompactSpacingConverter">
            <converters:BoolToDoubleConverter.TrueValue>6</converters:BoolToDoubleConverter.TrueValue>
            <converters:BoolToDoubleConverter.FalseValue>12</converters:BoolToDoubleConverter.FalseValue>
        </converters:BoolToDoubleConverter>

        <converters:BoolToDoubleConverter x:Key="CompactSizeConverter">
            <converters:BoolToDoubleConverter.TrueValue>30</converters:BoolToDoubleConverter.TrueValue>
            <converters:BoolToDoubleConverter.FalseValue>60</converters:BoolToDoubleConverter.FalseValue>
        </converters:BoolToDoubleConverter>

        <converters:BoolToDoubleConverter x:Key="CompactWidthConverter">
            <converters:BoolToDoubleConverter.TrueValue>64</converters:BoolToDoubleConverter.TrueValue>
            <converters:BoolToDoubleConverter.FalseValue>128</converters:BoolToDoubleConverter.FalseValue>
        </converters:BoolToDoubleConverter>

        <converters:BoolToDoubleConverter x:Key="CompactHeightConverter">
            <converters:BoolToDoubleConverter.TrueValue>64</converters:BoolToDoubleConverter.TrueValue>
            <converters:BoolToDoubleConverter.FalseValue>128</converters:BoolToDoubleConverter.FalseValue>
        </converters:BoolToDoubleConverter>

        <converters:BoolToStyleConverter x:Key="CompactStyleConverter">
            <converters:BoolToStyleConverter.TrueValue>
                <Style TargetType="TextBlock" BasedOn="{StaticResource SubtitleTextBlockStyle}"/>
            </converters:BoolToStyleConverter.TrueValue>
            <converters:BoolToStyleConverter.FalseValue>
                <Style TargetType="TextBlock" BasedOn="{StaticResource TitleTextBlockStyle}"/>
            </converters:BoolToStyleConverter.FalseValue>
        </converters:BoolToStyleConverter>
    </UserControl.Resources>

    <StackPanel x:Name="MainPanel" Spacing="{x:Bind IsCompact, Mode=OneWay, Converter={StaticResource CompactSpacingConverter}}">
        <FontIcon HorizontalAlignment="Center" Visibility="{x:Bind Glyph, Mode=OneWay, Converter={StaticResource StringToVisibilityConverter}}"
                  FontFamily="{StaticResource SymbolThemeFontFamily}" Glyph="{x:Bind Glyph, Mode=OneWay}" FontSize="{x:Bind IsCompact, Mode=OneWay, Converter={StaticResource CompactSizeConverter}}"/>

        <Image HorizontalAlignment="Center" Visibility="{x:Bind Image, Mode=OneWay, Converter={StaticResource NullableToVisibilityConverter}}"
               Width="{x:Bind IsCompact, Mode=OneWay, Converter={StaticResource CompactWidthConverter}}" Height="{x:Bind IsCompact, Mode=OneWay, Converter={StaticResource CompactHeightConverter}}"
               Source="{x:Bind Image, Mode=OneWay}"/>

        <TextBlock HorizontalAlignment="Center" Visibility="{Binding Title, Mode=OneWay, Converter={StaticResource StringToVisibilityConverter}}"
                   TextWrapping="WrapWholeWords" Text="{Binding Title, Mode=OneWay}" Style="{Binding IsCompact, Mode=OneWay, Converter={StaticResource CompactStyleConverter}}"/>

        <TextBlock HorizontalAlignment="Center" Visibility="{Binding Description, Mode=OneWay, Converter={StaticResource StringToVisibilityConverter}}"
                   TextWrapping="WrapWholeWords" Text="{Binding Description, Mode=OneWay}"/>

        <Frame HorizontalAlignment="Center" VerticalAlignment="Stretch" Margin="0,6,0,0"
               Visibility="{Binding Child, Mode=OneWay, Converter={StaticResource NullableToVisibilityConverter}}" Content="{Binding Child, Mode=OneWay}"/>
    </StackPanel>
    
</UserControl>